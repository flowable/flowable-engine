
<div class="modal" ng-controller="ShowCaseDiagramCtrl">
    <div class="modal-dialog wide">
        <div class="modal-content">
            <div class="modal-header">
                <div class="pull-right">
                    <button type="button" class="close" ng-click="$hide()">&times;</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="error-message" ng-if="model.errorMessage">
                    <span>{{model.errorMessage}}</span>
                </div>
                <div class="alert-wrapper" ng-cloak>
                    <div class="alert {{alerts.current.type}}" ng-show="alerts.current" ng-click="dismissAlert()">
                        <span>{{alerts.current.message}}</span>
                        <span class="badge" ng-show="alerts.queue.length">{{alerts.queue.length + 1}}</span>
                    </div>
                </div>

                <div class="popup-wrapper clearfix">
                    <div class="model-preview-wrapper">
                        <div id="cmmnModel"/>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">

                    <div class="component" ng-if="model.isDebuggerEnabled">
                        <div class="tabs-wrapper">
                            <div class="tabs clearfix">
                                <div class="tab" ng-repeat="tab in tabData.tabs"
                                     ng-class="{'active': tabData.activeTab == tab.id}">
                                    <a ng-click="tabData.activeTab = tab.id">
                                        {{tab.name | translate:node}}&nbsp;
                                        <span class="badge" ng-if="tab.info != undefined">{{tab.info}}</span>
                                    </a>
                                </div>
                            </div>
                            <div class="title"></div>

                            <div class="grid-wrapper grid-wrapper-compact"
                                 ng-if="gridVariables && tabData.activeTab == tabData.tabs[0].id">
                                <div class="ui-grid-contents-wrapper" ng-show="model.displayVariables">
                                    <div id="variablesUi" ui-grid="gridVariables" style="height: 200px; width: 100%"
                                         ui-grid-auto-resize></div>
                                </div>
                            </div>

                            <div class="grid-wrapper grid-wrapper-compact"
                                 ng-if="gridPlanItems && tabData.activeTab == tabData.tabs[1].id">
                                <div class="ui-grid-contents-wrapper" ng-show="model.planItems">
                                    <div id="planItemsUi" ui-grid="gridPlanItems" style="height: 200px; width: 100%"
                                         ui-grid-selection
                                         ui-grid-auto-resize></div>
                                </div>
                            </div>

                            <div class="grid-wrapper grid-wrapper-compact"
                                 ng-if="gridLog && tabData.activeTab == tabData.tabs[2].id">
                                <div class="ui-grid-contents-wrapper">
                                    <div id="logUi" ui-grid="gridLog" style="height: 200px; width: 100%"
                                         ui-grid-selection
                                         ui-grid-auto-resize></div>
                                </div>

                            </div>
                            <div class="grid-wrapper grid-wrapper-compact"
                                 ng-if="!model.caseInstance.ended && tabData.activeTab == tabData.tabs[3].id">
                                <div class="pull-left" ng-show="model.selectedPlanItemId">
                                    <label for="expressionPlanItemId">{{'CASE.TITLE.PLANITEM' | translate}}</label>
                                    <span id="expressionPlanItemId"
                                          ng-bind="model.selectedPlanItemId">{{model.selectedPlanItemId}}</span>
                                </div>
                                <div class="col-xs-12">
                                    <label for="expressionText" class="col-xs-1">{{'CASE.TITLE.EXPRESSION' | translate}}</label>
                                    <div id="expressionText" class="col-xs-7">
                                    <textarea class="form-control" ng-model="model.expression" editor-input-check
                                              style="width:100%; height:100%; max-width: 100%; max-height: 100%; min-height: 50px"
                                    />
                                    </div>
                                    <div class="col-xs-1">
                                        <label for="expressionResult">{{'CASE.TITLE.RESULT' | translate}}</label>
                                    </div>
                                    <div class="col-xs-1">
                                        <div id="expressionResult" ng-if="model.result">
                                            <span>{{model.result}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="grid-wrapper grid-wrapper-compact"
                                 ng-if="!model.caseInstance.ended && tabData.activeTab == tabData.tabs[4].id">
                                <div class="pull-left" ng-show="model.selectedPlanItemId">
                                    <label for="scriptPlanItemId">{{'CASE.TITLE.PLANITEM' | translate}}</label>
                                    <span id="scriptPlanItemId"
                                          ng-bind="model.selectedPlanItemId">{{model.selectedPlanItemId}}</span>
                                </div>
                                <div class="col-xs-12">
                                    <label for="scriptText" class="col-xs-1">{{'CASE.TITLE.SCRIPT' | translate}}</label>
                                    <div id="scriptText" class="col-xs-7">
                                    <textarea class="form-control" ng-model="model.scriptText" editor-input-check
                                              style="width:100%; height:100%; max-width: 100%; max-height: 100%; min-height: 150px"
                                    />
                                    </div>
                                    <div id="scriptLanguage" class="col-xs-1" align="left">
                                        <input type="radio" ng-model="model.scriptLanguage" name="scriptLanguage" value="groovy"> groovy
                                        <input type="radio" ng-model="model.scriptLanguage" name="scriptLanguage" value="javascript"> js
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="pull-left" ng-if="!model.caseInstance.ended && tabData.activeTab == tabData.tabs[3].id">
                    <button type="button" class="btn btn-sm btn-default" ng-click="evaluateExpression()">
                        {{'CASE.ACTION.EXECUTE' | translate}}
                    </button>
                </div>
                <div class="pull-left" ng-if="!model.caseInstance.ended && tabData.activeTab == tabData.tabs[4].id">
                    <button type="button" class="btn btn-sm btn-default" ng-click="evaluateScript()">
                        {{'CASE.ACTION.EXECUTE' | translate}}
                    </button>
                </div>
                <div class="pull-right">
                    <button type="button" class="btn btn-sm btn-default" ng-click="$hide()">
                        {{'GENERAL.ACTION.CLOSE' | translate}}
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
